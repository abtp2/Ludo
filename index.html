<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable= yes"/>
    <title>MutantLudo</title>
</head>
<body>
<section data-user="blue">
 <!-- Dices -->
 <div class="user red-user" data-name="Ashutosh Pandey">
 <img src="https://randomuser.me/api/portraits/men/43.jpg">
 <div class="dice" data-face="3">
  <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
 </div>
 </div>
 <div class="user green-user" data-name="Dhruv">
 <img src="https://randomuser.me/api/portraits/men/78.jpg">
 <div class="dice" data-face="5">
  <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
 </div>
 </div>
  <div class="user blue-user" data-name="Akash">
 <img src="https://randomuser.me/api/portraits/men/72.jpg">
 <div class="dice" data-face="2">
  <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
 </div>
 </div>
 <div class="user yellow-user" data-name="Tejas">
 <img src="https://randomuser.me/api/portraits/men/76.jpg">
 <div class="dice" data-face="4">
  <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
 </div>
 </div>
 <!-- Dices end -->


<div class="ludo-container">
<div class="red block">
 <div class="r-block1"></div>
 <div class="r-block2"></div>
 <div class="r-block3"></div>
 <div class="r-block4"></div>
</div>
 <div class="section vertical">
 <div class="box box-12"></div>
 <div class="box box-13"></div>
 <div class="box box-14"></div>
 <div class="box box-11"></div>
 <div class="box g-box g-box-2"></div>
 <div class="box g-box g-box-1 box-15"></div>
 <div class="box box-10"></div>
 <div class="box g-box g-box-3"></div>
 <div class="box box-16"></div>
 <div class="box box-9"></div>
 <div class="box g-box g-box-4"></div>
 <div class="box box-17"></div>
 <div class="box box-8"></div>
 <div class="box g-box g-box-5"></div>
 <div class="box box-18"></div>
 <div class="box box-7"></div>
 <div class="box g-box g-box-6"></div>
 <div class="box box-19"></div>
 </div>
<div class="green block">
 <div class="g-block1"></div>
 <div class="g-block2"></div>
 <div class="g-block3"></div>
 <div class="g-block4"></div>
</div>
 <div class="section horizontal">
 <div class="box box-1"></div>
 <div class="box r-box r-box-1 box-2"></div>
 <div class="box box-3"></div>
 <div class="box box-4"></div>
 <div class="box box-5"></div>
 <div class="box box-6"></div>
 <div class="box box-52"></div>
 <div class="box r-box r-box-2"></div>
 <div class="box r-box r-box-3"></div>
 <div class="box r-box r-box-4"></div>
 <div class="box r-box r-box-5"></div>
 <div class="box r-box r-box-6"></div>
 <div class="box box-51"></div>
 <div class="box box-50"></div>
 <div class="box box-49"></div>
 <div class="box box-48"></div>
 <div class="box box-47"></div>
 <div class="box box-46"></div>
 </div>
<div class="victory-box"><div></div></div>
 <div class="section horizontal">
 <div class="box box-20"></div>
 <div class="box box-21"></div>
 <div class="box box-22"></div>
 <div class="box box-23"></div>
 <div class="box box-24"></div>
 <div class="box box-25"></div>
 <div class="box y-box y-box-6"></div>
 <div class="box y-box y-box-5"></div>
 <div class="box y-box y-box-4"></div>
 <div class="box y-box y-box-3"></div>
 <div class="box y-box y-box-2"></div>
 <div class="box box-26"></div>
 <div class="box box-32"></div>
 <div class="box box-31"></div>
 <div class="box box-30"></div>
 <div class="box box-29"></div>
 <div class="box y-box y-box-1 box-28"></div>
 <div class="box box-27"></div>
 </div>
<div class="blue block">
 <div class="b-block1"></div>
 <div class="b-block2"></div>
 <div class="b-block3"></div>
 <div class="b-block4"></div>
</div>
 <div class="section vertical">
 <div class="box box-45"></div>
 <div class="box b-box b-box-6"></div>
 <div class="box box-33"></div>
 <div class="box box-44"></div>
 <div class="box b-box b-box-5"></div>
 <div class="box box-34"></div>
 <div class="box box-43"></div>
 <div class="box b-box b-box-4"></div>
 <div class="box box-35"></div>
 <div class="box box-42"></div>
 <div class="box b-box b-box-3"></div>
 <div class="box box-36"></div>
 <div class="box b-box b-box-1 box-41"></div>
 <div class="box b-box b-box-2"></div>
 <div class="box box-37"></div>
 <div class="box box-40"></div>
 <div class="box box-39"></div>
 <div class="box box-38"></div>
 </div>
<div class="yellow block">
 <div class="y-block1"></div>
 <div class="y-block2"></div>
 <div class="y-block3"></div>
 <div class="y-block4"></div>
</div>
</div>

<!-- Ludo Tokens -->
<div class="token r-token" position="r-token1" name="r-token1"><div></div><span></span></div>
<div class="token r-token" position="r-token2" name="r-token2"><div></div><span></span></div>
<div class="token r-token" position="r-token3" name="r-token3"><div></div><span></span></div>
<div class="token r-token active-token" position="r-token4" name="r-token4"><div></div><span></span></div>

<div class="token g-token" position="g-token1" name="g-token1"><div></div><span></span></div>
<div class="token g-token" position="g-token2" name="g-token2"><div></div><span></span></div>
<div class="token g-token" position="g-token3" name="g-token3"><div></div><span></span></div>
<div class="token g-token" position="g-token4" name="g-token4"><div></div><span></span></div>

<div class="token b-token" position="b-token1" name="b-token1"><div></div><span></span></div>
<div class="token b-token" position="b-token2" name="b-token2"><div></div><span></span></div>
<div class="token b-token" position="b-token3" name="b-token3"><div></div><span></span></div>
<div class="token b-token" position="b-token4" name="b-token4"><div></div><span></span></div>

<div class="token y-token" position="y-token1" name="y-token1"><div></div><span></span></div>
<div class="token y-token" position="y-token2" name="y-token2"><div></div><span></span></div>
<div class="token y-token" position="y-token3" name="y-token3"><div></div><span></span></div>
<div class="token y-token" position="y-token4" name="y-token4"><div></div><span></span></div>
</section>





<style>
*{
margin: 0;
padding: 0;
box-sizing: border-box;
user-select: none;
font-family: Arial, Helvetica, sans-serif;
/* outline: 1px solid greenyellow; */
}
html{
height: 100%;
overflow: hidden;
}
body{
height: 100%;
background-image: radial-gradient(ellipse at top, #335476 0.0%, #31506e 11.1%, #304b67 22.2%, #2f4760 33.3%, #2d4359 44.4%, #2c3f51 55.6%, #2a3a4a 66.7%, #293643 77.8%, #28323d 88.9%, #262e36 100.0%);
background-repeat: no-repeat;
}
:root {
  --red: #d62828;
  --green: #4caf50;
  --blue: #1788d6;
  --yellow: #fbc02d;
}
.red{
--color: var(--red);
}
.green{
--color: var(--green);
}
.blue{
--color: var(--blue);
}
.yellow{
--color: var(--yellow);
}
section{
width: 90%;
max-width: 500px;
display: grid;
margin: 1rem auto;
justify-content: space-between;
grid-template-areas: 
 "red-user . green-user"
 "ludo ludo ludo"
 "blue-user . yellow-user";
}
/* red user */
[data-user="red"]{
grid-template-areas: 
 "green-user . yellow-user"
 "ludo ludo ludo"
 "red-user . blue-user";
}
[data-user="red"] .ludo-container{
transform: rotate(270deg);
}
[data-user="red"] .red-user .dice{
opacity: 1;
}
/* green user */
[data-user="green"]{
grid-template-areas: 
 "yellow-user . blue-user"
 "ludo ludo ludo"
 "green-user . red-user";
}
[data-user="green"] .ludo-container{
transform: rotate(180deg);
}
[data-user="greem"] .green-user .dice{
opacity: 1;
}
/* blue user */
[data-user="blue"]{
grid-template-areas: 
 "red-user . green-user"
 "ludo ludo ludo"
 "blue-user . yellow-user";
}
[data-user="blue"] .ludo-container{
transform: rotate(0deg);
}
[data-user="blue"] .blue-user .dice{
opacity: 1;
}
/* yellow user */
[data-user="yellow"]{
grid-template-areas: 
 "blue-user . red-user"
 "ludo ludo ludo"
 "yellow-user . green-user";
}
[data-user="yellow"] .ludo-container{
transform: rotate(90deg);
}
[data-user="yellow"] .yellow-user .dice{
opacity: 1;
}


.ludo-container{
width: 100%;
margin: 0 auto;
display: flex;
flex-wrap: wrap;
background: #fff;
grid-area: ludo;
}
.block{
width: 40%;
display: grid;
grid-template-columns: repeat(2,1fr);
grid-template-rows: repeat(2,1fr);
place-items: center;
aspect-ratio: 1/1;
padding: 10px;
border: 20px solid var(--color);
position: relative;
}
.block::before{
content: attr(data-name);
position: absolute;
left: -40%;
font-size: 14px;
}
.block div{
width: 60%;
background: var(--color);
aspect-ratio: 1/1;
border-radius: 100%;
border: 1px solid grey;
}
.vertical{
width: 20%;
}
.horizontal{
width: 40%;
}
.section{
display: flex;
flex-wrap: wrap;
}
.vertical .box{
width: 33.33%;
aspect-ratio: 1/1;
}
.horizontal .box{
width: 16.66%;
aspect-ratio: 1/1;
}
.box{
border: 0.1px solid grey;
}
.r-box{
background: var(--red);
}
.g-box{
background: var(--green);
}
.b-box{
background: var(--blue);
}
.y-box{
background: var(--yellow);
}
.victory-box{
width: 20%; 
aspect-ratio: 1/1;
overflow: hidden;
}
.victory-box div{
width: 100%;
height: 100%;
transform: rotate(-45deg) scale(2);
background: conic-gradient(
    var(--green) 0deg 90deg,
    var(--yellow) 90deg 180deg,
    var(--blue) 180deg 270deg,
    var(--red) 270deg 360deg
  );
}
.token{
position: absolute;
margin-top: 1%;
transition: all 0.2s ease;
display: flex;
flex-direction: column;
align-items: center;
}
.token div{
border-radius: 50% 50% 50% 2px;
border: 2px solid #fff;
outline: 1px solid var(--pin);
width: 20px;
height: 20px;
transform: rotate(-45deg) scale(0.85);
background: #fff;
box-shadow: 1px 0px 2px 1px #aaa;
display: flex;
align-items: center;
justify-content: center;
position: relative;
z-index: 5 !important;
}
@media(max-width: 360px){
.token{
margin-top: 1.2%;
}.token div{
transform: rotate(-45deg) scale(0.7);
}.token span{
margin-top: -4px !important;
transform: scale(0.7) !important;
}}
@media(min-width: 500px){
.token{
margin-top: 0.5%;
}.token div{
transform: rotate(-45deg) scale(1.2);
}.token span{
transform: scale(1.5) !important;
margin-top: 2px !important;
}}
.token div::before{
content: '';
width: 10px;
height: 10px;
border-radius: 50%;
background: var(--pin);
position: absolute;
}
.token span{
width: 10px;
height: 8px;
background: transparent;
border: 1px solid #000;
outline: 2px solid #000;
border-radius: 100%;
z-index: 0 !important;
margin-top: -2px;
}
.active-token div{
animation: active-token 0.5s ease infinite;
}
@keyframes active-token{
100%{
outline: 4px solid var(--pin);
}0%{
outline: 1px solid var(--pin);
}}
.r-token{
--pin: var(--red);
}
.g-token{
--pin: var(--green);
}
.b-token{
--pin: var(--blue);
}
.y-token{
--pin: var(--yellow);
}


/* users */
.user{
width: fit-content;
display: flex;
align-items: center;
justify-content: center;
gap: 5px;
margin: 10px 0 25px 0;
position: relative;
}
.user::before{
position: absolute;
content: attr(data-name);
color: rgba(255,255,255,0.6);
font-size: 0.8rem;
font-weight: 500;
display: inline-block;
max-width: 90px;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
bottom: -20px;
left: 2px;
border-radius: 2px;
}
.user img{
width: 45px;
height: 45px;
border-radius: 3px;
border: 3px solid grey;
}
.dice{
width: 45px;
height: 45px;
background: aliceblue;
border-radius: 8px;
padding: 10px;
display: grid;
grid-template-columns: repeat(3, 1fr);
grid-template-rows: repeat(3, 1fr);
gap: 2px;  
justify-content: center;
align-content: center;
box-shadow: 0.05rem 0.8rem 0.8rem rgba(0, 0, 0, 0.12);
border: 1px solid grey;
opacity: 0.6;
position: relative;
}
/*
.dice::before{
position: absolute;
content: attr(data-name);
left: -115%;
bottom: -5px;
color: #fff;
font-size: 0.8rem;
font-weight: 500;
display: inline-block;
max-width: 50px;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
} */
.dice i{
font-style: normal;
width: 10px;
height: 10px;
background: #000;
border-radius: 100%;
opacity: 0;
}
.disable{
pointer-events: none !important;
}
.red-user{
grid-area: red-user;
}
.green-user{
grid-area: green-user;
}
.blue-user{
grid-area: blue-user;
}
.yellow-user{
grid-area: yellow-user;
}

/* Faces */
[data-face="1"] i:nth-child(5),
[data-face="2"] i:nth-child(1),
[data-face="2"] i:nth-child(9),
[data-face="3"] i:nth-child(1),
[data-face="3"] i:nth-child(5),
[data-face="3"] i:nth-child(9),
[data-face="4"] i:nth-child(1),
[data-face="4"] i:nth-child(3),
[data-face="4"] i:nth-child(7),
[data-face="4"] i:nth-child(9),
[data-face="5"] i:nth-child(1),
[data-face="5"] i:nth-child(3),
[data-face="5"] i:nth-child(5),
[data-face="5"] i:nth-child(7),
[data-face="5"] i:nth-child(9),
[data-face="6"] i:nth-child(1),
[data-face="6"] i:nth-child(4),
[data-face="6"] i:nth-child(7),
[data-face="6"] i:nth-child(3),
[data-face="6"] i:nth-child(6),
[data-face="6"] i:nth-child(9){
  opacity: 1;
}
</style>
<script>
let user = document.querySelector("section:nth-of-type(1)").getAttribute("data-user");
document.querySelectorAll(".token").forEach((box)=>{
box.oncontextmenu = function (){
alert(box.className + " " + box.getAttribute("position"));
}
});

function moveToken(x,y){  
  const floatingDiv = document.querySelector(x);  
  const toElement = document.querySelector(y);  
  if(!toElement || !floatingDiv){  
   console.error("Invalid selector!");  
   return;  
  }  
  const targetRect = toElement.getBoundingClientRect();  
  const floatingRect = floatingDiv.getBoundingClientRect();  
  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;  
  const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;  
  const targetCenterTop = targetRect.top + scrollTop + targetRect.height / 2;  
  const targetCenterLeft = targetRect.left + scrollLeft + targetRect.width / 2;  
  
  const floatingHeight = floatingRect.height;  
  const floatingWidth = floatingRect.width;  
  floatingDiv.style.position = "absolute";  
  floatingDiv.style.top = (targetCenterTop - floatingHeight) + "px"; // bottom to center  
  floatingDiv.style.left = (targetCenterLeft - floatingWidth / 2) + "px"; // horizontal center  
  floatingDiv.setAttribute("position", y.replace(".", ""));  
}

//Token settlement
moveToken(`[name="r-token1"]`, ".r-block1");
moveToken(`[name="r-token2"]`, ".r-block2");
moveToken(`[name="r-token3"]`, ".r-block3");
moveToken(`[name="r-token4"]`, ".r-block4");

moveToken(`[name="g-token1"]`, ".g-block1");
moveToken(`[name="g-token2"]`, ".g-block2");
moveToken(`[name="g-token3"]`, ".g-block3");
moveToken(`[name="g-token4"]`, ".g-block4");

moveToken(`[name="b-token1"]`, ".b-block1");
moveToken(`[name="b-token2"]`, ".b-block2");
moveToken(`[name="b-token3"]`, ".b-block3");
moveToken(`[name="b-token4"]`, ".b-block4");

moveToken(`[name="y-token1"]`, ".y-block1");
moveToken(`[name="y-token2"]`, ".y-block2");
moveToken(`[name="y-token3"]`, ".y-block3");
moveToken(`[name="y-token4"]`, ".y-block4");

document.querySelectorAll(".token").forEach((token)=>{
token.onclick = function (){
attr = token.getAttribute("name");
r = Math.floor(Math.random() * 52) + 1;
moveToken(`[name="${attr}"]`, `.box-${r}`)
}
});


function roll(x,y){
const dice = document.querySelector(x);
const roll = y ? y : Math.floor(Math.random() * 6) + 1;
let a = 1;
const interval = setInterval(() => {
if(a < 7){
dice.setAttribute("data-face", Math.floor(Math.random()*6)+1);
a++;
dice.style.pointerEvents ="none";
}else{
clearInterval(interval);
a = 1;
dice.setAttribute("data-face", roll);
dice.style.pointerEvents ="auto";
}}, 200);
}

//rolls 
document.querySelector(`.${user}-user .dice`).onclick =()=>{
roll(`.${user}-user .dice`);
}

// onresize=()=>location.reload()
</script>
</body>
</html>
